<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dental Client CRM</title>
    <link rel="stylesheet" href="src/css/style.css">
</head>
<body>
    <!-- Read-Only Banner (shows only on Netlify deployment) -->
    <div id="readonly-banner" style="display: none; background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%); color: white; padding: 12px 24px; text-align: center; font-weight: 600; position: sticky; top: 0; z-index: 1000; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
        üëÅÔ∏è READ-ONLY MODE - Viewing from Netlify. To make changes, run locally on your computer.
    </div>

    <div id="app">
        <header>
            <div class="header-left">
                <h1>Dental Client CRM</h1>
                <div id="stats-bar" class="stats-bar">
                    <div class="stat-item">
                        <span class="stat-label">Active</span>
                        <span class="stat-value" id="stat-active">0</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Won</span>
                        <span class="stat-value stat-won" id="stat-won">0</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Rate</span>
                        <span class="stat-value" id="stat-rate">0%</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">High Priority</span>
                        <span class="stat-value stat-priority" id="stat-priority">0</span>
                    </div>
                </div>
            </div>
            <div class="header-right">
                <div class="search-filter-bar">
                    <input type="text" id="search-input" placeholder="üîç Search clinics, doctors, locations..." />
                    <select id="location-filter">
                        <option value="">All Locations</option>
                    </select>
                    <select id="priority-filter">
                        <option value="">All Priorities</option>
                        <option value="hot">üî• Hot Lead</option>
                        <option value="high">‚≠ê High Priority</option>
                        <option value="warm">üëç Warm</option>
                        <option value="cold">‚ùÑÔ∏è Cold</option>
                    </select>
                    <select id="specialization-filter">
                        <option value="">All Specializations</option>
                    </select>
                </div>
                <div class="header-controls">
                    <button id="add-clinic-btn" class="btn-primary">+ Add Clinic</button>
                    <button id="view-workflow-btn" class="btn-secondary">üìñ Guide</button>
                </div>
            </div>
        </header>

        <main id="board">
            <!-- Columns will be dynamically generated by JavaScript -->
        </main>

        <div id="copy-paste-section">
            <h2>üì± WhatsApp Message Templates</h2>
            <div id="message-templates"></div>
        </div>
    </div>

    <!-- Modal for Adding/Editing a Clinic -->
    <div id="clinic-modal" class="modal-container" style="display: none;">
        <div class="modal-content">
            <h2 id="modal-title">Add New Clinic</h2>
            <form id="clinic-form">
                <input type="hidden" id="clinic-id">

                <div class="form-row">
                    <div class="form-group">
                        <label for="clinic-name">Clinic Name:</label>
                        <input type="text" id="clinic-name" required>
                    </div>
                    <div class="form-group">
                        <label for="doctor-name">Doctor's Name:</label>
                        <input type="text" id="doctor-name">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="clinic-location">üìç Location:</label>
                        <input type="text" id="clinic-location" placeholder="e.g., Mumbai, Bangalore, Delhi">
                    </div>
                    <div class="form-group">
                        <label for="clinic-priority">üéØ Priority:</label>
                        <select id="clinic-priority">
                            <option value="">Normal</option>
                            <option value="hot">üî• Hot Lead</option>
                            <option value="high">‚≠ê High Priority</option>
                            <option value="warm">üëç Warm</option>
                            <option value="cold">‚ùÑÔ∏è Cold</option>
                        </select>
                    </div>
                </div>

                <label for="clinic-specializations">ü¶∑ Specializations:</label>
                <div id="specializations-container">
                    <input type="text" id="specialization-input" placeholder="Type: Implants, Aligners, Veneers, Cosmetic, etc. and press Enter">
                    <div id="specialization-chips"></div>
                </div>

                <label>Contact Numbers:</label>
                <div id="contact-numbers-container">
                    <!-- Dynamic contact number fields will be added here by JavaScript -->
                </div>
                <button type="button" id="add-contact-number-btn">+ Add Contact Number</button>

                <div class="form-row">
                    <div class="form-group">
                        <label for="clinic-website">Website URL:</label>
                        <input type="url" id="clinic-website">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="client-type">Client Type:</label>
                        <select id="client-type">
                            <option value="A">A - No Website</option>
                            <option value="B">B - Bad/Outdated Website</option>
                            <option value="C">C - Good Website</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="clinic-status">Status:</label>
                        <select id="clinic-status">
                            <!-- Status options will be dynamically generated -->
                        </select>
                    </div>
                </div>

                <label for="clinic-notes">Notes:</label>
                <textarea id="clinic-notes" rows="4"></textarea>

                <div id="cold-call-checklist-container">
                    <h3>‚òéÔ∏è Cold Call Checklist</h3>
                    <div id="cold-call-checklist"></div>
                </div>

                <div class="modal-actions">
                    <button type="submit" id="save-clinic-btn">üíæ Save</button>
                    <button type="button" id="cancel-btn">Cancel</button>
                    <button type="button" id="delete-clinic-btn" style="display: none;">üóëÔ∏è Delete</button>
                </div>
            </form>
            <div id="ai-assist-section">
                <h3>ü§ñ AI Assistant</h3>
                <textarea id="ai-input" placeholder="Paste conversation transcript here..."></textarea>
                <button id="ai-summarize-btn">‚ú® Summarize with AI</button>
                <p><strong>AI Summary:</strong></p>
                <div id="ai-output" class="ai-output-box"></div>
            </div>
            <div id="personalized-templates-section">
                <h3>üí¨ Personalized WhatsApp Templates</h3>
                <p style="color: #666; font-size: 14px; margin-bottom: 10px;">Generate custom templates using this clinic's data</p>
                <button id="generate-personalized-templates-btn" class="btn-generate-templates">ü§ñ Generate Personalized Templates</button>
                <div id="personalized-error" class="personalized-error" style="display: none;"></div>
            </div>
        </div>
    </div>

    <!-- Modal for Workflow Guide -->
    <div id="workflow-modal" class="modal-container" style="display: none;">
        <div class="modal-content workflow-modal">
            <h2>üìã Your Daily Workflow</h2>
            <div id="workflow-content"></div>
            <div class="modal-actions">
                <button id="close-workflow-btn">Close</button>
            </div>
        </div>
    </div>

    <!-- Modal for Personalized Templates -->
    <div id="personalized-modal" class="modal-container" style="display: none;">
        <div class="modal-content personalized-templates-modal">
            <div class="personalized-header">
                <h2 id="personalized-modal-title">üéØ Personalized Templates</h2>
                <button id="close-personalized-btn" class="close-btn">‚úï</button>
            </div>
            <div id="personalized-loading" class="personalized-loading" style="display: none;">
                <div class="spinner"></div>
                <p>‚è≥ AI is personalizing your templates...</p>
            </div>
            <div id="personalized-templates-container" class="personalized-templates-container">
                <!-- Personalized templates will be dynamically inserted here -->
            </div>
        </div>
    </div>

    <!-- IMPORTANT: environment.js must load FIRST -->
    <script src="src/js/environment.js"></script>
    <script src="src/js/config.js"></script>
    <script src="src/js/script.js"></script>
</body>
</html>
