# ğŸ“Š Personalized Templates - Flow Diagram

## High-Level Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         USER INTERFACE                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  CRM Board   â”‚â”€â”€â”€â”€â”€â”€â”‚ Clinic Modal â”‚â”€â”€â”€â”€â”€â”€â”‚ Personalized â”‚ â”‚
â”‚  â”‚  (Existing)  â”‚      â”‚  (Existing)  â”‚      â”‚   Templates  â”‚ â”‚
â”‚  â”‚              â”‚      â”‚              â”‚      â”‚    Modal     â”‚ â”‚
â”‚  â”‚ Click Clinic â”‚      â”‚  + New Btn   â”‚      â”‚    (NEW)     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚         â”‚                     â”‚                      â”‚         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                     â”‚                      â”‚
          â–¼                     â–¼                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         DATA LAYER                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚   Extract Clinic Data        Filter Templates      Display     â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     Results      â”‚
â”‚   â”‚ â€¢ Name          â”‚       â”‚ Pre-Preview  â”‚                   â”‚
â”‚   â”‚ â€¢ Doctor        â”‚       â”‚ Outreach     â”‚                   â”‚
â”‚   â”‚ â€¢ Location      â”‚       â”‚              â”‚                   â”‚
â”‚   â”‚ â€¢ Specializ.    â”‚       â”‚ Initial      â”‚                   â”‚
â”‚   â”‚ â€¢ Notes         â”‚       â”‚ Outreach     â”‚                   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚           â”‚                         â”‚                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚                         â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      API INTEGRATION                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚              Build Request â†’ Call DeepSeek API                  â”‚
â”‚                                                                 â”‚
â”‚  {                                                              â”‚
â”‚    "model": "deepseek-chat",                                    â”‚
â”‚    "messages": [                                                â”‚
â”‚      { "role": "system", "content": "System prompt..." },       â”‚
â”‚      { "role": "user", "content": {                            â”‚
â”‚          "clinic_data": {...},                                  â”‚
â”‚          "templates": {...}                                     â”‚
â”‚        }                                                        â”‚
â”‚      }                                                          â”‚
â”‚    ],                                                           â”‚
â”‚    "temperature": 0.3                                           â”‚
â”‚  }                                                              â”‚
â”‚                                                                 â”‚
â”‚                           â†“                                     â”‚
â”‚                    Parse Response                               â”‚
â”‚                           â†“                                     â”‚
â”‚              Validate JSON Structure                            â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    DISPLAY LAYER                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚   Render Personalized Templates in Modal                       â”‚
â”‚                                                                 â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚   â”‚ ğŸ¯ Personalized Templates for The Smile Avenue    [X]  â”‚ â”‚
â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚   â”‚                                                         â”‚ â”‚
â”‚   â”‚ Pre-Preview Outreach                                    â”‚ â”‚
â”‚   â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚
â”‚   â”‚ â”‚ 1ï¸âƒ£ Warm Opener                     ğŸ“‹ Copy      â”‚   â”‚ â”‚
â”‚   â”‚ â”‚ â° First message                                 â”‚   â”‚ â”‚
â”‚   â”‚ â”‚ ğŸ“Œ New lead, no preview sent                     â”‚   â”‚ â”‚
â”‚   â”‚ â”‚                                                  â”‚   â”‚ â”‚
â”‚   â”‚ â”‚ Hi Dr. Parul Gautam, I'm Kulkaran.             â”‚   â”‚ â”‚
â”‚   â”‚ â”‚ I help premium dental clinics in Jammu...      â”‚   â”‚ â”‚
â”‚   â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚
â”‚   â”‚                                                         â”‚ â”‚
â”‚   â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚
â”‚   â”‚ â”‚ 2ï¸âƒ£ Next Template                   ğŸ“‹ Copy      â”‚   â”‚ â”‚
â”‚   â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚
â”‚   â”‚                                                         â”‚ â”‚
â”‚   â”‚ Initial Outreach                                        â”‚ â”‚
â”‚   â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚
â”‚   â”‚ â”‚ 1ï¸âƒ£ Initial Preview Message        ğŸ“‹ Copy      â”‚   â”‚ â”‚
â”‚   â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚
â”‚   â”‚                                                         â”‚ â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Detailed User Flow

```
START
  â”‚
  â”œâ”€â–º User views CRM board with clinic cards
  â”‚
  â”œâ”€â–º User clicks on clinic card
  â”‚   â””â”€â–º Clinic modal opens (EXISTING behavior)
  â”‚       â””â”€â–º Shows clinic details form
  â”‚
  â”œâ”€â–º User sees "ğŸ¤– Generate Personalized Templates" button
  â”‚
  â”œâ”€â–º User clicks button
  â”‚   â”‚
  â”‚   â”œâ”€â–º VALIDATION CHECK
  â”‚   â”‚   â”œâ”€â–º Has clinic name? â”€â”€NOâ”€â”€â–º Show alert, STOP
  â”‚   â”‚   â””â”€â–º Has doctor name? â”€â”€NOâ”€â”€â–º Show alert, STOP
  â”‚   â”‚
  â”‚   â”œâ”€â–º Show loading state ("â³ Generating...")
  â”‚   â”‚
  â”‚   â”œâ”€â–º EXTRACT DATA
  â”‚   â”‚   â””â”€â–º Clinic name, doctor, location, specializations, notes
  â”‚   â”‚
  â”‚   â”œâ”€â–º FILTER TEMPLATES
  â”‚   â”‚   â””â”€â–º Get "Pre-Preview Outreach" + "Initial Outreach" chains
  â”‚   â”‚
  â”‚   â”œâ”€â–º BUILD API REQUEST
  â”‚   â”‚   â”œâ”€â–º System prompt
  â”‚   â”‚   â”œâ”€â–º User prompt with clinic data + templates
  â”‚   â”‚   â””â”€â–º Temperature: 0.3, Max tokens: 2000
  â”‚   â”‚
  â”‚   â”œâ”€â–º CALL DEEPSEEK API
  â”‚   â”‚   â”‚
  â”‚   â”‚   â”œâ”€â–º SUCCESS? â”€â”€NOâ”€â”€â–º Show error + retry button, STOP
  â”‚   â”‚   â”‚
  â”‚   â”‚   â””â”€â–º YES
  â”‚   â”‚       â”‚
  â”‚   â”‚       â”œâ”€â–º PARSE RESPONSE
  â”‚   â”‚       â”‚   â”œâ”€â–º Valid JSON? â”€â”€NOâ”€â”€â–º Show error, STOP
  â”‚   â”‚       â”‚   â””â”€â–º Has required fields? â”€â”€NOâ”€â”€â–º Show error, STOP
  â”‚   â”‚       â”‚
  â”‚   â”‚       â””â”€â–º DISPLAY PERSONALIZED TEMPLATES
  â”‚   â”‚           â”‚
  â”‚   â”‚           â”œâ”€â–º Open new modal
  â”‚   â”‚           â”œâ”€â–º Render each template with:
  â”‚   â”‚           â”‚   â”œâ”€â–º Title
  â”‚   â”‚           â”‚   â”œâ”€â–º Timing
  â”‚   â”‚           â”‚   â”œâ”€â–º Condition
  â”‚   â”‚           â”‚   â”œâ”€â–º Personalized content
  â”‚   â”‚           â”‚   â””â”€â–º Copy button
  â”‚   â”‚           â”‚
  â”‚   â”‚           â””â”€â–º USER ACTIONS
  â”‚   â”‚               â”‚
  â”‚   â”‚               â”œâ”€â–º Click "ğŸ“‹ Copy" on a template
  â”‚   â”‚               â”‚   â”œâ”€â–º Copy to clipboard
  â”‚   â”‚               â”‚   â”œâ”€â–º Show "âœ… Copied!" feedback
  â”‚   â”‚               â”‚   â””â”€â–º Reset button after 1.5s
  â”‚   â”‚               â”‚
  â”‚   â”‚               â”œâ”€â–º Click "X" to close modal
  â”‚   â”‚               â”‚   â””â”€â–º Return to clinic modal
  â”‚   â”‚               â”‚
  â”‚   â”‚               â””â”€â–º Can generate again for same/different clinic
  â”‚
  â””â”€â–º END
```

---

## Data Flow Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   data.json    â”‚
â”‚                â”‚
â”‚ [{             â”‚
â”‚   "name": "...",
â”‚   "doctor": "...",
â”‚   "location": "...",
â”‚   ...          â”‚
â”‚ }]             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ READ
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Clinic Modal Form       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Name: The Smile...   â”‚  â”‚
â”‚  â”‚ Doctor: Dr. Parul... â”‚  â”‚
â”‚  â”‚ Location: Jammu...   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  [ğŸ¤– Generate Templates]   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ EXTRACT
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Extracted Clinic Data    â”‚
â”‚   {                        â”‚
â”‚     "clinic_name": "...",  â”‚
â”‚     "doctor_name": "...",  â”‚
â”‚     "city": "...",         â”‚
â”‚     "specializations": [...],
â”‚     "notes": "..."         â”‚
â”‚   }                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ COMBINE WITH
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   TEMPLATE_CHAINS             â”‚
â”‚   {                           â”‚
â”‚     "Pre-Preview Outreach": { â”‚
â”‚       templates: [...]        â”‚
â”‚     },                        â”‚
â”‚     "Initial Outreach": {     â”‚
â”‚       templates: [...]        â”‚
â”‚     }                         â”‚
â”‚   }                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ SEND TO API
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     DeepSeek API               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ POST /v1/chat/completionsâ”‚  â”‚
â”‚  â”‚                          â”‚  â”‚
â”‚  â”‚ Body:                    â”‚  â”‚
â”‚  â”‚ {                        â”‚  â”‚
â”‚  â”‚   "model": "deepseek...",â”‚  â”‚
â”‚  â”‚   "messages": [          â”‚  â”‚
â”‚  â”‚     {system prompt},     â”‚  â”‚
â”‚  â”‚     {clinic data +       â”‚  â”‚
â”‚  â”‚      templates}          â”‚  â”‚
â”‚  â”‚   ],                     â”‚  â”‚
â”‚  â”‚   "temperature": 0.3     â”‚  â”‚
â”‚  â”‚ }                        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ RESPONSE
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Personalized Templates JSON  â”‚
â”‚   {                            â”‚
â”‚     "chains": [                â”‚
â”‚       {                        â”‚
â”‚         "chain_name": "...",   â”‚
â”‚         "templates": [         â”‚
â”‚           {                    â”‚
â”‚             "content": "Hi Dr. â”‚
â”‚              Parul Gautam..."  â”‚
â”‚           }                    â”‚
â”‚         ]                      â”‚
â”‚       }                        â”‚
â”‚     ]                          â”‚
â”‚   }                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ RENDER
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Personalized Templates Modal   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ 1ï¸âƒ£ Template    [ğŸ“‹ Copy] â”‚  â”‚
â”‚  â”‚ Hi Dr. Parul Gautam...    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ 2ï¸âƒ£ Template    [ğŸ“‹ Copy] â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## API Request Structure

```
REQUEST:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ POST https://api.deepseek.com/v1/chat/completions         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Headers:                                                   â”‚
â”‚   Content-Type: application/json                          â”‚
â”‚   Authorization: Bearer sk-xxxxxxxxxxxxx                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Body:                                                      â”‚
â”‚ {                                                          â”‚
â”‚   "model": "deepseek-chat",                                â”‚
â”‚   "messages": [                                            â”‚
â”‚     {                                                      â”‚
â”‚       "role": "system",                                    â”‚
â”‚       "content": "You are a WhatsApp template              â”‚
â”‚                   personalization assistant..."            â”‚
â”‚     },                                                     â”‚
â”‚     {                                                      â”‚
â”‚       "role": "user",                                      â”‚
â”‚       "content": {                                         â”‚
â”‚         "clinic_data": {                                   â”‚
â”‚           "clinic_name": "The Smile Avenue",               â”‚
â”‚           "doctor_name": "Dr. Parul Gautam",               â”‚
â”‚           "city": "Jammu",                                 â”‚
â”‚           "specializations": "Implants, Aesthetics",       â”‚
â”‚           "notes": "High quality service..."               â”‚
â”‚         },                                                 â”‚
â”‚         "templates": {                                     â”‚
â”‚           "chains": [ /* template objects */ ]            â”‚
â”‚         }                                                  â”‚
â”‚       }                                                    â”‚
â”‚     }                                                      â”‚
â”‚   ],                                                       â”‚
â”‚   "temperature": 0.3,                                      â”‚
â”‚   "max_tokens": 2000                                       â”‚
â”‚ }                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

RESPONSE:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Status: 200 OK                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Body:                                                      â”‚
â”‚ {                                                          â”‚
â”‚   "choices": [                                             â”‚
â”‚     {                                                      â”‚
â”‚       "message": {                                         â”‚
â”‚         "role": "assistant",                               â”‚
â”‚         "content": {                                       â”‚
â”‚           "chains": [                                      â”‚
â”‚             {                                              â”‚
â”‚               "chain_name": "Pre-Preview Outreach",        â”‚
â”‚               "templates": [                               â”‚
â”‚                 {                                          â”‚
â”‚                   "id": "pre_001",                         â”‚
â”‚                   "title": "1ï¸âƒ£ Warm Opener",              â”‚
â”‚                   "timing": "First message",               â”‚
â”‚                   "condition": "New lead...",              â”‚
â”‚                   "content": "Hi Dr. Parul Gautam,         â”‚
â”‚                               I'm Kulkaran..."             â”‚
â”‚                 }                                          â”‚
â”‚               ]                                            â”‚
â”‚             }                                              â”‚
â”‚           ]                                                â”‚
â”‚         }                                                  â”‚
â”‚       }                                                    â”‚
â”‚     }                                                      â”‚
â”‚   ]                                                        â”‚
â”‚ }                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Error Handling Flow

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ User Clicks Btn â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ Validate Data   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ Clinic name       â”‚
                    â”‚ exists?           â”‚
                    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚      â”‚
                     YES â”‚      â”‚ NO
                         â”‚      â”‚
                         â”‚      â””â”€â”€â”€â–º âš ï¸ Alert: "Add clinic name"
                         â”‚
                    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ Doctor name     â”‚
                    â”‚ exists?         â”‚
                    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                         â”‚      â”‚
                     YES â”‚      â”‚ NO
                         â”‚      â”‚
                         â”‚      â””â”€â”€â”€â–º âš ï¸ Alert: "Add doctor name"
                         â”‚
                    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ API key         â”‚
                    â”‚ configured?     â”‚
                    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                         â”‚      â”‚
                     YES â”‚      â”‚ NO
                         â”‚      â”‚
                         â”‚      â””â”€â”€â”€â–º âŒ Error: "API key missing"
                         â”‚
                    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ Call API        â”‚
                    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                         â”‚      â”‚
                  SUCCESSâ”‚      â”‚FAIL
                         â”‚      â”‚
                         â”‚      â”œâ”€â”€â”€â–º Network error
                         â”‚      â”‚     â””â”€â”€â”€â–º ğŸ”„ Show retry button
                         â”‚      â”‚
                         â”‚      â”œâ”€â”€â”€â–º Timeout (>30s)
                         â”‚      â”‚     â””â”€â”€â”€â–º â±ï¸ "Request timed out"
                         â”‚      â”‚
                         â”‚      â””â”€â”€â”€â–º Invalid response
                         â”‚            â””â”€â”€â”€â–º âŒ "Format error, retry"
                         â”‚
                    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ Parse JSON      â”‚
                    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                         â”‚      â”‚
                  VALID  â”‚      â”‚ INVALID
                         â”‚      â”‚
                         â”‚      â””â”€â”€â”€â–º âŒ "Invalid JSON, retry"
                         â”‚
                    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ Validate        â”‚
                    â”‚ structure       â”‚
                    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                         â”‚      â”‚
                     OK  â”‚      â”‚ BAD
                         â”‚      â”‚
                         â”‚      â””â”€â”€â”€â–º âŒ "Missing fields"
                         â”‚
                    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ âœ… Display      â”‚
                    â”‚ Templates       â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Component Interaction

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         index.html                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Clinic Modal (EXISTING)                             â”‚   â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚   â”‚
â”‚  â”‚ â”‚ Form fields...                              â”‚     â”‚   â”‚
â”‚  â”‚ â”‚ [Save] [Cancel] [Delete]                    â”‚     â”‚   â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚   â”‚
â”‚  â”‚                                                     â”‚   â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚   â”‚
â”‚  â”‚ â”‚ [ğŸ¤– Generate Personalized Templates] (NEW)  â”‚     â”‚   â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Personalized Templates Modal (NEW)                  â”‚   â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚   â”‚
â”‚  â”‚ â”‚ Header: [Clinic Name]              [X]      â”‚     â”‚   â”‚
â”‚  â”‚ â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚     â”‚   â”‚
â”‚  â”‚ â”‚ Pre-Preview Outreach                        â”‚     â”‚   â”‚
â”‚  â”‚ â”‚   [Template 1] [ğŸ“‹ Copy]                    â”‚     â”‚   â”‚
â”‚  â”‚ â”‚   [Template 2] [ğŸ“‹ Copy]                    â”‚     â”‚   â”‚
â”‚  â”‚ â”‚                                             â”‚     â”‚   â”‚
â”‚  â”‚ â”‚ Initial Outreach                            â”‚     â”‚   â”‚
â”‚  â”‚ â”‚   [Template 1] [ğŸ“‹ Copy]                    â”‚     â”‚   â”‚
â”‚  â”‚ â”‚   [Template 2] [ğŸ“‹ Copy]                    â”‚     â”‚   â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       src/js/script.js                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  EXISTING:                                                   â”‚
â”‚  - openModal(clinicId)                                       â”‚
â”‚  - saveClinic()                                              â”‚
â”‚  - renderBoard()                                             â”‚
â”‚  - populateMessageTemplates()                                â”‚
â”‚                                                              â”‚
â”‚  NEW:                                                        â”‚
â”‚  - generatePersonalizedTemplates(clinicId)                   â”‚
â”‚  - extractClinicData(clinic)                                 â”‚
â”‚  - filterRelevantTemplates()                                 â”‚
â”‚  - callDeepSeekAPI(clinicData, templates)                    â”‚
â”‚  - parseAPIResponse(response)                                â”‚
â”‚  - displayPersonalizedTemplates(templates)                   â”‚
â”‚  - copyPersonalizedTemplate(content)                         â”‚
â”‚  - closePersonalizedModal()                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       src/css/style.css                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  NEW STYLES:                                                 â”‚
â”‚  - .generate-templates-btn                                   â”‚
â”‚  - .personalized-modal                                       â”‚
â”‚  - .personalized-template-card                               â”‚
â”‚  - .personalized-copy-btn                                    â”‚
â”‚  - .loading-spinner                                          â”‚
â”‚  - .error-message                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      src/js/config.js                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  const config = {                                            â”‚
â”‚    DEEPSEEK_API_KEY: 'sk-...',                               â”‚
â”‚    DEEPSEEK_MODEL: 'deepseek-chat',                          â”‚
â”‚    DEEPSEEK_TEMPERATURE: 0.3,                                â”‚
â”‚    DEEPSEEK_MAX_TOKENS: 2000,                                â”‚
â”‚    API_TIMEOUT: 30000                                        â”‚
â”‚  };                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## State Management

```
GLOBAL STATE:

currentClinicData = null         // Currently selected clinic
personalizedTemplates = null     // Generated templates
isGenerating = false             // Loading state
lastError = null                 // Last error message


LIFECYCLE:

1. Initial Load
   â””â”€â–º Load data.json
       â””â”€â–º Render CRM board
           â””â”€â–º Templates ready in TEMPLATE_CHAINS

2. User Clicks Clinic
   â””â”€â–º openModal(clinicId)
       â””â”€â–º Load clinic from data
           â””â”€â–º currentClinicData = clinic

3. User Clicks "Generate Templates"
   â””â”€â–º isGenerating = true
       â””â”€â–º Extract data
           â””â”€â–º Call API
               â””â”€â–º Success:
               â”‚   â””â”€â–º personalizedTemplates = response
               â”‚       â””â”€â–º Display modal
               â”‚           â””â”€â–º isGenerating = false
               â”‚
               â””â”€â–º Error:
                   â””â”€â–º lastError = error
                       â””â”€â–º Show error message
                           â””â”€â–º isGenerating = false

4. User Clicks Copy
   â””â”€â–º Copy to clipboard
       â””â”€â–º Show feedback

5. User Closes Modal
   â””â”€â–º personalizedTemplates = null
       â””â”€â–º Return to clinic modal
```

---

This flow ensures smooth data processing from user action to final display!
